(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{ObQG:function(B,M,a){B.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},PdsH:function(B,M,a){"use strict";a.r(M);var ce=a("DYRE"),$=a("zeV3"),oe=a("Znn+"),F=a("ZTPi"),ge=a("miYZ"),y=a("tsqr"),p=a("k1fw"),h=a("9og8"),S=a("tJVT"),de=a("fOrg"),V=a("+KLJ"),Z=a("WmNS"),o=a.n(Z),D=a("cJ7L"),T=a("FY4R"),J=a("3flX"),Y=a("Y0UT"),K=a("80zm"),Q=a("CZrw"),L=a("q1tI"),R=a("VMEa"),C=a("Qurx"),X=a("/aGu"),W=a("tneF"),t=a("9kvl"),w=a("QttV"),H=a("CwrG"),k=a("74pX");function q(b,d){return N.apply(this,arguments)}function N(){return N=Object(h.a)(o.a.mark(function b(d,j){return o.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(t.g)("/api/login/captcha",Object(p.a)({method:"POST",params:Object(p.a)({},d)},j||{})));case 1:case"end":return m.stop()}},b)})),N.apply(this,arguments)}var _=a("ObQG"),s=a.n(_),e=a("nKUr"),I=function(d){var j=d.content;return Object(e.jsx)(V.a,{style:{marginBottom:24},message:j,type:"error",showIcon:!0})},ee=function(){!t.e||setTimeout(function(){var d=t.e.location.query,j=d,O=j.redirect;t.e.push(O||"/")},10)},ae=function(){var d=Object(L.useState)(!1),j=Object(S.a)(d,2),O=j[0],m=j[1],se=Object(L.useState)({}),P=Object(S.a)(se,2),z=P[0],te=P[1],re=Object(L.useState)("account"),U=Object(S.a)(re,2),x=U[0],ne=U[1],A=Object(t.i)("@@initialState"),v=A.initialState,ie=A.setInitialState,l=Object(t.h)(),le=function(){var g=Object(h.a)(o.a.mark(function n(){var i,c;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v==null||(i=v.fetchUserInfo)===null||i===void 0?void 0:i.call(v);case 2:c=r.sent,c&&ie(Object(p.a)(Object(p.a)({},v),{},{currentUser:c}));case 4:case"end":return r.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),ue=function(){var g=Object(h.a)(o.a.mark(function n(i){var c,f,r;return o.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m(!0),u.prev=1,u.next=4,Object(k.c)(Object(p.a)(Object(p.a)({},i),{},{type:x}));case 4:if(c=u.sent,c.status!=="ok"){u.next=12;break}return f=l.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),y.default.success(f),u.next=10,le();case 10:return ee(),u.abrupt("return");case 12:te(c),u.next=19;break;case 15:u.prev=15,u.t0=u.catch(1),r=l.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),y.default.error(r);case 19:m(!1);case 20:case"end":return u.stop()}},n,null,[[1,15]])}));return function(i){return g.apply(this,arguments)}}(),E=z.status,G=z.type;return Object(e.jsxs)("div",{className:s.a.container,children:[Object(e.jsx)("div",{className:s.a.lang,children:t.b&&Object(e.jsx)(t.b,{})}),Object(e.jsxs)("div",{className:s.a.content,children:[Object(e.jsxs)("div",{className:s.a.top,children:[Object(e.jsx)("div",{className:s.a.header,children:Object(e.jsxs)(w.a,{to:"/",children:[Object(e.jsx)("img",{alt:"logo",className:s.a.logo,src:"/logo.svg"}),Object(e.jsx)("span",{className:s.a.title,children:"Ant Design"})]})}),Object(e.jsx)("div",{className:s.a.desc,children:l.formatMessage({id:"pages.layouts.userLayout.title"})})]}),Object(e.jsxs)("div",{className:s.a.main,children:[Object(e.jsxs)(R.b,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:l.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(n,i){return i.pop()},submitButtonProps:{loading:O,size:"large",style:{width:"100%"}}},onFinish:function(){var g=Object(h.a)(o.a.mark(function n(i){return o.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:ue(i);case 1:case"end":return f.stop()}},n)}));return function(n){return g.apply(this,arguments)}}(),children:[Object(e.jsxs)(F.a,{activeKey:x,onChange:ne,children:[Object(e.jsx)(F.a.TabPane,{tab:l.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),Object(e.jsx)(F.a.TabPane,{tab:l.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),E==="error"&&G==="account"&&Object(e.jsx)(I,{content:l.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF\uFF08admin/ant.design)"})}),x==="account"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(C.a,{name:"username",fieldProps:{size:"large",prefix:Object(e.jsx)(D.a,{className:s.a.prefixIcon})},placeholder:l.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),Object(e.jsx)(C.a.Password,{name:"password",fieldProps:{size:"large",prefix:Object(e.jsx)(T.a,{className:s.a.prefixIcon})},placeholder:l.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),E==="error"&&G==="mobile"&&Object(e.jsx)(I,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),x==="mobile"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(C.a,{fieldProps:{size:"large",prefix:Object(e.jsx)(J.a,{className:s.a.prefixIcon})},name:"mobile",placeholder:l.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:Object(e.jsx)(t.a,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),Object(e.jsx)(X.a,{fieldProps:{size:"large",prefix:Object(e.jsx)(T.a,{className:s.a.prefixIcon})},captchaProps:{size:"large"},placeholder:l.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(n,i){return n?"".concat(i," ").concat(l.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):l.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var g=Object(h.a)(o.a.mark(function n(i){var c;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,q({phone:i});case 2:if(c=r.sent,c!==!1){r.next=5;break}return r.abrupt("return");case 5:y.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return r.stop()}},n)}));return function(n){return g.apply(this,arguments)}}()})]}),Object(e.jsxs)("div",{style:{marginBottom:24},children:[Object(e.jsx)(W.a,{noStyle:!0,name:"autoLogin",children:Object(e.jsx)(t.a,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),Object(e.jsx)("a",{style:{float:"right"},children:Object(e.jsx)(t.a,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]}),Object(e.jsxs)($.b,{className:s.a.other,children:[Object(e.jsx)(t.a,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"}),Object(e.jsx)(Y.a,{className:s.a.icon}),Object(e.jsx)(K.a,{className:s.a.icon}),Object(e.jsx)(Q.a,{className:s.a.icon})]})]})]}),Object(e.jsx)(H.a,{})]})},je=M.default=ae}}]);
