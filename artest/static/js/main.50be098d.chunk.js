(this["webpackJsonpar-test-2"]=this["webpackJsonpar-test-2"]||[]).push([[0],{38:function(e,t,n){e.exports=n.p+"static/media/marker.b94cb7cf.png"},45:function(e,t,n){e.exports=n.p+"static/media/transparent.38c6c96d.svg"},46:function(e,t,n){e.exports=n.p+"static/media/camera_para.343c761a.dat"},47:function(e,t,n){e.exports=n.p+"static/media/patt.4092b01e.hiro"},56:function(e,t,n){e.exports=n(69)},61:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),o=n.n(i),c=(n(61),n(50)),l=n(98),m=n(34),s=n(99),d=n(103),u=n(97),p=n(102),g=n(96),f=n(100),h=n(48),E=n.n(h),x=n(49),w=n.n(x),v=n(39),b=n.n(v),y=n(40),k=n.n(y),B=n(35),C=n.n(B),R=n(93),N=n(94),T=n(12),S=n(92),j=Object(S.a)({root:Object(T.a)({display:"flex",flexDirection:"column",justifyContent:"space-between",height:"calc(100% - 56px)"},"height","calc(var(--vh, 1vh) * 100 - 56px)"),container:{overflowY:"auto",height:"100%"}}),A=function(e){var t=j();return r.a.createElement("div",{className:t.root},r.a.createElement(R.a,null),r.a.createElement("div",{className:t.container},r.a.createElement(N.a,{maxWidth:"small"===e.type?"xs":"lg"},e.children)))},L=n(95),O=n(45),H=n.n(O),W=Object(S.a)((function(e){return{root:{marginTop:e.spacing(2)},logoIcon:{marginTop:e.spacing(1),marginRight:e.spacing(2),marginLeft:e.spacing(-2)}}})),z=function(e){var t=W();return r.a.createElement(L.a,{className:t.root},r.a.createElement("img",{className:t.logoIcon,src:H.a,alt:"E-Gifts logo",width:"40px"}),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"h4"},e.topic),r.a.createElement(g.a,{variant:"body2"},"E-Gifts"===e.topic?"Brings gifts to AR & VR!":"E-Gifts - Brings gifts to AR & VR!")))},G=Object(S.a)((function(e){return{defaultBox:{backgroundColor:e.palette.background.paper,borderRadius:20},warningBox:{backgroundColor:e.palette.background.warning,borderRadius:20},successBox:{backgroundColor:e.palette.background.success,borderRadius:20},title:{marginBottom:e.spacing(1)}}})),F=function(e){var t=G(),n=t.defaultBox;return"warning"===e.type?n=t.warningBox:"success"===e.type&&(n=t.successBox),r.a.createElement(s.a,{className:n,mt:2,p:2},void 0!==e.title?r.a.createElement(g.a,{className:t.title,variant:"h5"},e.title):null,e.children)},I=Object(S.a)((function(e){return{boxes:{display:"flex",flexWrap:"wrap"},leftBox:Object(T.a)({width:"50%",paddingRight:e.spacing(1)},"@media (max-width: ".concat(800,"px)"),{paddingRight:0,width:"100%"}),leftBoxBig:Object(T.a)({width:"70%",paddingRight:e.spacing(1)},"@media (max-width: ".concat(800,"px)"),{paddingRight:0,width:"100%"}),rightBox:Object(T.a)({width:"50%",paddingLeft:e.spacing(1)},"@media (max-width: ".concat(800,"px)"),{paddingLeft:0,width:"100%"}),rightBoxBig:Object(T.a)({width:"30%",paddingLeft:e.spacing(1)},"@media (max-width: ".concat(800,"px)"),{paddingLeft:0,width:"100%"}),defaultBox:{backgroundColor:e.palette.background.paper,borderRadius:20,display:"flex",flexDirection:"column",alignItems:"center"},warningBox:{backgroundColor:e.palette.background.warning,borderRadius:20,display:"flex",flexDirection:"column",alignItems:"center"},title:{alignSelf:"flex-start",marginBottom:e.spacing(1)}}})),M=function(e){var t=I();return r.a.createElement("div",{className:t.boxes},r.a.createElement("div",{className:"big"===e.type?t.leftBoxBig:t.leftBox},r.a.createElement(s.a,{className:"warning"===e.leftBoxType?t.warningBox:t.defaultBox,p:2,mt:2},void 0!==e.leftBoxTitle?r.a.createElement(g.a,{className:t.title,variant:"h5"},e.leftBoxTitle):null,e.leftBox)),r.a.createElement("div",{className:"big"===e.type?t.rightBoxBig:t.rightBox},r.a.createElement(s.a,{className:"warning"===e.rightBoxType?t.warningBox:t.defaultBox,p:2,mt:2},void 0!==e.rightBoxTitle?r.a.createElement(g.a,{className:t.title,variant:"h5"},e.rightBoxTitle):null,e.rightBox)))},D=n(72),P=Object(S.a)((function(e){return{canvas:{outline:"none"}}})),U=THREE,V=U.WebGLRenderer,Y=U.Color,q=U.PerspectiveCamera,X=U.Scene,Z=U.AmbientLight,J=U.GLTFLoader,_=U.OrbitControls,K=U.Vector3,Q=function(e){var t=P(),n=Object(D.a)(),a=null;r.a.useEffect((function(){var t=new V({canvas:a});t.setClearColor(new Y(n.palette.background.paper));var r=document.getElementById("vr");t.setSize(r.clientWidth,r.clientHeight);window.addEventListener("resize",(function(){t.setSize(r.clientWidth,r.clientHeight)}));var i=new X,o=new q(65,window.innerWidth/window.innerHeight,.1,1e3);o.position.z=5,o.position.y=3,o.position.x=-4,o.lookAt(new K(0,0,0)),i.add(o);var c=new Z(4210752,e.light);i.add(c),(new J).load(e.modelURL,(function(t){t.scene.scale.set(e.scaleX,e.scaleY,e.scaleZ),i.add(t.scene)}),(function(e){console.log("".concat(e.loaded/e.total*100,"% of the model loaded"))}),(function(e){console.error("An error happened",e)}));var l=[];l.push((function(){t.render(i,o)}));var m=null;requestAnimationFrame((function e(t){requestAnimationFrame(e),m=m||t-1e3/60;var n=Math.min(200,t-m);m=t,l.forEach((function(e){e(n/1e3,t/1e3)}))}));var s=new _(o,t.domElement);s.rotateSpeed=.3,s.zoomSpeed=.9,s.minDistance=3,s.maxDistance=20,s.minPolarAngle=0,s.maxPolarAngle=Math.PI/2,s.enableDamping=!0,s.dampingFactor=.05,s.target.set(0,.5,0),l.push((function(){s.update()}))}),[]);return r.a.createElement("canvas",{className:t.canvas,ref:function(e){a=e}})},$=THREE,ee=$.Color,te=$.WebGLRenderer,ne=n(46),ae=n.n(ne),re=n(47),ie=n.n(re),oe=THREEx,ce=oe.ArMarkerControls,le=oe.ArToolkitContext,me=oe.ArToolkitSource,se=n(38),de=n.n(se),ue=Object(S.a)((function(e){return{markerSearchContainer:{position:"absolute",bottom:e.spacing(16),left:0,right:0,width:"100%",display:"flex",justifyContent:"center"},markerSearchContent:{display:"flex",flexDirection:"column",alignItems:"center",color:"red",borderColor:"red",borderWidth:2,borderStyle:"solid",borderRadius:20,maxWidth:300,padding:10},markerSearchImage:{padding:e.spacing(1),height:100,width:100}}})),pe=THREE,ge=pe.Camera,fe=pe.Group,he=pe.Scene,Ee=pe.AmbientLight,xe=pe.GLTFLoader,we=function(e){var t=ue(),n=r.a.useState(!1),a=Object(m.a)(n,2),i=a[0],o=a[1],c=null;r.a.useEffect((function(){var t=function(e){var t=new te({alpha:!0,canvas:e});return t.setClearColor(new ee("lightgrey"),0),t.setSize(window.innerWidth,window.innerHeight),t.domElement.style.position="absolute",t.domElement.style.top="0px",t.domElement.style.left="0px",t}(c),n=new he,a=new ge;n.add(a);var r=new fe;n.add(r);var i=[];(function(e,t){return new ce(e,t,{type:"pattern",patternUrl:ie.a})})(function(e,t,n){le.baseURL="../";var a=new me({sourceType:"webcam"}),r=function(){a.onResizeElement(),a.copyElementSizeTo(e.domElement),null!==i.arController&&a.copyElementSizeTo(i.arController.canvas)};a.init((function(){r()})),window.addEventListener("resize",(function(){r()}));var i=new le({cameraParametersUrl:ae.a,detectionMode:"mono"});return i.init((function(){t.projectionMatrix.copy(i.getProjectionMatrix())})),n.push((function(){!1!==a.ready&&i.update(a.domElement)})),i}(t,a,i),r).addEventListener("markerFound",(function(){o(!0)}));var l=new Ee(4210752,e.light);n.add(l),(new xe).load(e.modelURL,(function(t){t.scene.scale.set(e.scaleX,e.scaleY,e.scaleZ),r.add(t.scene)}),(function(e){console.log("".concat(e.loaded/e.total*100,"% of the model loaded"))}),(function(e){console.error("An error happened",e)})),i.push((function(){t.render(n,a)}));var m=null;requestAnimationFrame((function e(t){requestAnimationFrame(e),m=m||t-1e3/60;var n=Math.min(200,t-m);m=t,i.forEach((function(e){e(n/1e3,t/1e3)}))}))}),[]);return r.a.createElement("div",null,r.a.createElement("canvas",{ref:function(e){c=e}}),!i&&r.a.createElement("div",{className:t.markerSearchContainer},r.a.createElement("div",{className:t.markerSearchContent},r.a.createElement(g.a,{variant:"h6"},"Show Marker"),r.a.createElement("img",{className:t.markerSearchImage,alt:"Marker Example",src:de.a}))))},ve=Object(S.a)((function(e){return{root:Object(T.a)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},"height","calc(var(--vh, 1vh) * 100)"),markerImage:{maxWidth:"80%",maxHeight:"80%"},text:{marginTop:e.spacing(2),textAlign:"center",padding:"0 10px"}}})),be=function(){var e=ve();return r.a.createElement("div",{id:"marker",className:e.root},r.a.createElement("img",{className:e.markerImage,src:n(38),alt:"Marker"}),window.innerWidth<800||window.innerHeight<800?null:r.a.createElement(g.a,{className:e.text,variant:"h4"},"Point the camera to see magic"))},ye=Object(S.a)((function(e){return{mobileButton:{marginTop:e.spacing(2)},text:{marginLeft:e.spacing(1)}}})),ke=function(e){var t=ye();return"onClick"===e.type?r.a.createElement(f.a,{variant:"extended",size:"medium",color:"primary",className:t.mobileButton,onClick:e.onClick},e.children,r.a.createElement("span",{className:t.text},e.text)):null},Be=Object(S.a)((function(e){return{fixedButton:{position:"absolute",bottom:e.spacing(9),left:e.spacing(2)},text:{marginLeft:e.spacing(1)}}})),Ce=function(e){var t=Be();return"onClick"===e.type?r.a.createElement(f.a,{variant:"extended",size:"medium",color:"primary",className:t.fixedButton,onClick:e.onClick},e.children,r.a.createElement("span",{className:t.text},e.text)):null},Re=Object(S.a)((function(e){return{vr:{width:"100%",height:"100%",minHeight:"400px",maxHeight:"500px"},title:{alignSelf:"flex-start",marginTop:e.spacing(2),marginBottom:e.spacing(1)},step:{marginBottom:e.spacing(1)},text:{alignSelf:"flex-start"},fab:{alignSelf:"flex-end",marginTop:e.spacing(1)},icon:{marginRight:e.spacing(1)}}})),Ne=function(e){var t=Re(),n=["To get full experience you need to view this E-Gift in AR","To view E-Gift, open the Marker on another device (the button in the lower left corner of the View page) or print it"],a=r.a.useState("welcome"),i=Object(m.a)(a,2),o=i[0],c=i[1],l=window.innerWidth<800||window.innerHeight<800;return"welcome"===o?r.a.createElement(A,null,r.a.createElement(z,{topic:"E-Gift for you"}),r.a.createElement(s.a,{id:"content",pb:2},r.a.createElement(F,{title:"Click to open your E-Gift",type:"success"},r.a.createElement(f.a,{className:t.fab,variant:"extended",size:"small",color:"primary",onClick:function(){return c("main")}},r.a.createElement(E.a,{className:t.icon}),"Open E-Gift")))):"main"===o?r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null,r.a.createElement(z,{topic:"E-Gift for you"}),r.a.createElement(s.a,{id:"content",pb:2},r.a.createElement(M,{type:"big",leftBoxTitle:"Your E-Gift in VR",leftBox:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"vr",className:t.vr},r.a.createElement(Q,{modelURL:"".concat("http://localhost:5000","/").concat("models/house/scene.gltf"),scaleX:.3,scaleY:.3,scaleZ:.3,light:7})),r.a.createElement(g.a,null,"Drag to rotate, pinch or scroll to zoom")),rightBoxType:!0===C.a.isWebRTCSupported?"":"warning",rightBoxTitle:!0===C.a.isWebRTCSupported?"How to view in AR?":"Warning",rightBox:!0===C.a.isWebRTCSupported?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{orientation:"vertical"},n.map((function(e,n){return r.a.createElement(u.a,{className:t.step,key:n},r.a.createElement(p.a,null,e))}))),r.a.createElement(f.a,{className:t.fab,variant:"extended",size:"small",color:"primary",onClick:function(){c("AR")}},r.a.createElement(w.a,{className:t.icon}),"View in AR")):r.a.createElement(g.a,{className:t.text},"Unfortunately, your browser or device does not support E-Gifts's AR technology, try changing them to get full experience with AR")}),l?r.a.createElement(ke,{type:"onClick",text:"Marker",onClick:function(){c("marker")}},r.a.createElement(b.a,null)):null)),l?null:r.a.createElement(Ce,{type:"onClick",text:"Marker",onClick:function(){c("marker")}},r.a.createElement(b.a,null))):"marker"===o?r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null),r.a.createElement(Ce,{type:"onClick",text:"Close",onClick:function(){c("main")}},r.a.createElement(k.a,null))):"AR"===o?r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{modelURL:"".concat("http://localhost:5000","/").concat("models/house/scene.gltf"),scaleX:.3,scaleY:.3,scaleZ:.3,light:7}),r.a.createElement(Ce,{type:"onClick",text:"Close",onClick:function(){return window.location.reload()}},r.a.createElement(k.a,null))):null},Te=Object(c.a)({palette:{background:{default:"#fff",paper:"#f3f3f3",warning:"#ffd4d4",success:"#a8ffbc"},primary:{main:"#2d53fe"},secondary:{main:"#00ff39"}}}),Se=function(e){var t=.01*(document&&document.documentElement&&document.documentElement.clientHeight||window.innerHeight);return document.documentElement.style.setProperty("--vh","".concat(t,"px")),window.addEventListener("resize",(function(){t=.01*(document&&document.documentElement&&document.documentElement.clientHeight||window.innerHeight),document.documentElement.style.setProperty("--vh","".concat(t,"px"))})),r.a.createElement(l.a,{theme:Te},r.a.createElement(Ne,null))};o.a.render(r.a.createElement(Se,null),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.50be098d.chunk.js.map